;/*FB_PKG_DELIM*/

__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),a[2],d[3]=d[2].get("encryption_version"),d[2],d[4]=d[2].get("epoch_anon_id"),d[2],d[5]=d[2].get("epoch_root_key"),d[2],d[6]=d[2].get("payload_key"),d[2],d[7]=d[2].get("payload_fallback_key"),d[2],d[8]=c.createArray(),d[42]=(d[8].push(c.i64.cast([0,6])),d[8]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[9],void 0,d[4],d[8]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!1:d[11]=!0,d[11]?c.resolve(d[12]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],d[43]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[12]=d[44]==null?"":d[44]}])},function(a){return d[13]=c.createArray(),d[42]=(d[13].push(c.i64.cast([0,6])),d[13]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[14],void 0,d[5],d[13]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!1:d[16]=!0,d[16]?c.resolve(d[17]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],d[43]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[17]=d[44]==null?"":d[44]}])},function(a){return d[18]=c.createArray(),d[42]=(d[18].push(c.i64.cast([0,6])),d[18]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],void 0,d[6],d[18]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],d[43]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[22]=d[44]==null?"":d[44]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[23]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[23]==null?"":d[23],a[0]].join("")).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[25]=c.createArray(),d[42]=(d[25].push(c.i64.cast([0,6])),d[25]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[26]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[26],void 0,d[24],d[25]).then(function(a){return a=a,d[27]=a[0],a})},function(a){return d[27]?d[28]=!1:d[28]=!0,d[28]?c.resolve(d[29]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[27],c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],d[43]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[29]=d[44]==null?"":d[44]}])},function(a){return d[30]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[42]=c.createArray(),d[48]=(d[42].push(c.i64.cast([0,18])),d[42]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]!==void 0?c.sequence([function(a){return d[48]=c.i64.of_int32(d[43].length),c.i64.ge(d[48],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],c.i64.cast([0,0])).then(function(a){return a=a,d[50]=a[0],d[51]=a[1],a})},function(a){return d[49]=d[50]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[50]=c.createArray(),void 0!==void 0?d[51]=(d[50].push(void 0),d[50]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[50],c.i64.cast([0,3]))},function(a){return d[49]=void 0}])},function(a){return d[44]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[48]=c.createArray(),void 0!==void 0?d[49]=(d[48].push(void 0),d[48]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[48],c.i64.cast([0,3]))},function(a){return d[44]=void 0}])},function(a){return c.blobs.neq(d[44],void 0)?d[45]=!0:d[45]=!1,d[45]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?d[47]=d[46]:d[47]="encodingfailed",d[31]=d[47]}]):c.resolve(d[31]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return d[33]=new c.Map(),d[33].set("encryption_version",d[3]),d[33].set("epoch_anon_id",d[32]==null?"":d[32]),d[33].set("message_encryption_values",[d[12],d[30],d[17],d[30],d[22],d[30],d[29]].join("")),d[33].set("root_key_fingerprint",d[31]),d[33].set("backup_id",a[1]),d[34]=c.toJSON(d[33]),d[35]=new c.Map(),d[35].set("value_secret_ref",d[34]),d[36]=c.i64.of_float(Date.now()),d[37]=c.i64.random(),d[39]="Finishing execution. Execution time: ",d[40]=c.i64.to_string(c.i64.sub(d[36],d[0])),d[41]=" ms",d[38]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[38],d[39],d[38],d[40],d[38],d[41]].join("")),c.i64.eq(c.i64.mod_(d[37],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[42]=",",d[43]=c.createArray(),void 0!==void 0?d[44]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[39],d[42],d[40],d[42],d[41]].join(""),d[43],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[35],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSDatascriptEvaluatorDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("LSPlatformSyncSystemDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemDeferred");function a(){return h.load()}g["default"]=a}),98);